{% load core_template_tags %}

<table class="table mb-0">
    <thead class="thead-light">
        <tr>
            <th>Sl.no</th>
            {% for field in list_display %}
            <th>{{field|make_title}}</th>
            {% endfor %}
            {% if add_base_data %}
            <th>Created by</th>
            {% endif %}
            <th class="text-right">Acn</th>
        </tr>
    </thead>
    <tbody>
        {% for instance in instances %}
        <tr data-click-to-go-page="{{instance.get_absolute_url}}">
            <td>{% if page_obj.has_other_pages %}{{ forloop.counter0|add:page_obj.start_index }}{% else %}{{forloop.counter}}{% endif %}</td>
            {% for field in list_display %}
            <td>
                {% with value=instance|get_attr:field %}
                    {% if value.get_absolute_url %}
                    <a href="{{value.get_absolute_url}}"><i class="las la-external-link-alt font-15"></i></a>
                    {% endif %}
                    {{value|default:"-"}}
                {% endwith%}
            </td>
            {% endfor %}
            {% if add_base_data %}
            <td>{{instance.creator.username}}({{instance.created_at}})</td>
            {% endif %}
            <td class="text-right">
                <a href="javascript:void(0);" class="btn btn-xs btn-outline-light dropdown-toggle bg-white" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="las la-ellipsis-v fs-20 text-muted"></i>
                </a>
                <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dLabel11">
                    <a class="dropdown-item" href="{{instance.get_absolute_url}}"><i class="mr-1 las la-eye text-info font-18" title="View"></i>View</a>
                    {% if not instance.is_system_generated %}
                    <a class="dropdown-item" href="{{instance.get_update_url}}"><i class="mr-1 las la-pen text-warning font-18" title="Edit"></i>Edit</a>
                    <a class="dropdown-item action-button remove" href="{{instance.get_destroy_url}}" data-id="{{instance.pk}}" data-text="Are you sure you want to delete this item?" data-title="Are you sure?"><i class="mr-1 las la-trash-alt text-danger font-18" title="Delete"></i>Delete</a>
                    {% endif %}
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>